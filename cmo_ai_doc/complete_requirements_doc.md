# CMO AI ショート動画広告台本制作システム 完全統合要件定義書（最終版）

## 1. プロダクト概要

### 1.1 サービス名
**CMO AI** - ショート動画広告台本制作システム

### 1.2 サービスコンセプト
**「売れる広告 = 良い表現 × 良い構成」**という因数分解に基づき、蓄積されたデータ（商品情報、ユーザーデータ、過去の広告実績、外部データ等）を活用して、効果的なショート動画広告台本を自動生成するAIプラットフォーム。

### 1.3 ターゲットユーザー
- 通販向けサービスを行っている事業会社
- 広告代理店（組織単位での利用）
- D2Cブランド
- マーケター・広告制作担当者

### 1.4 提供価値
- データドリブンな広告制作の実現
- 過去のヒット広告パターンを活用した高精度なクリエイティブ生成
- 組織内でのナレッジ共有と効率的な制作フロー
- 台本からサムネイルまでの完全統合ワークフロー

### 1.5 ビジネスモデル
- SaaSサブスクリプションモデル
- 1ヶ月無料トライアル
- 月額¥10,000〜¥30,000（同時使用ユーザー数に応じて）
- AI API使用料は別途（ユーザーが直接設定・支払い）

## 2. システム構成

### 2.1 技術スタック
**フロントエンド**
- Next.js 14 (App Router)
- TypeScript
- Tailwind CSS
- shadcn/ui components

**バックエンド・インフラ**
- Supabase (認証、データベース、ストレージ)
- AI API統合
  - デフォルト: Gemini 1.5 Flash (無料)
  - 選択可能: ChatGPT、Claude、DeepSeek (APIキー設定)
  - 画像生成: DALL-E 3 (OpenAI APIキー設定)
- Stripe (決済処理)

**セキュリティ**
- Supabase Row Level Security
- 自動データ暗号化
- APIキー暗号化保存
- 組織間データ完全分離

### 2.2 データ保存期間
- プロジェクトデータ: 3年
- ログデータ: 1年
- 自動削除機能実装

## 3. 料金・プラン管理

### 3.1 プラン設定

#### 無料トライアル
- **期間**: 1ヶ月間
- **条件**: クレジットカード登録不要
- **機能**: 全機能利用可能
- **制限**: トライアル終了後の自動課金なし

#### スタータープラン - ¥10,000/月
- **管理者**: 1名
- **ゲスト**: 1名（同時使用可能）
- **登録可能**: 最大10名
- **プロジェクト**: 無制限
- **AI API**: 管理者設定（別途費用）
- **サポート**: メール

#### スタンダードプラン - ¥20,000/月
- **管理者**: 1名  
- **ゲスト**: 2名（同時使用可能）
- **登録可能**: 最大10名
- **プロジェクト**: 無制限
- **AI API**: 管理者設定（別途費用）
- **サポート**: メール + チャット

#### プロプラン - ¥30,000/月
- **管理者**: 1名
- **ゲスト**: 3名（同時使用可能）  
- **登録可能**: 最大10名
- **プロジェクト**: 無制限
- **AI API**: 管理者設定（別途費用）
- **サポート**: 優先サポート

### 3.2 決済機能
- Stripe統合
- 月額サブスクリプション
- 日本円決済
- 請求書発行機能
- 支払い履歴管理

## 4. 主要機能

### 4.1 組織・ユーザー管理機能

#### 4.1.1 組織管理
- 組織ID設定
- メンバー招待・管理
- 組織内プロジェクト共有
- 組織設定管理

#### 4.1.2 ロール管理
- **管理者**: 
  - 全プロジェクト閲覧・管理
  - メンバー招待・削除
  - APIキー設定
  - プラン変更
  - 強制ロック解除
  - 使用量・請求管理

- **メンバー**: 
  - 自分のプロジェクト作成・編集
  - 共有プロジェクト参加
  - 基本機能利用

- **閲覧者**: 
  - プロジェクト閲覧のみ
  - ダウンロード可能
  - 編集不可

#### 4.1.3 使用量管理
- 個人別・組織別使用状況表示
- AI使用量トラッキング（API別）
- 画像生成使用量追跡
- 月額使用量予測
- 課金管理機能

### 4.2 プロジェクト管理機能

#### 4.2.1 プロジェクト登録
- プロジェクト名設定
- 概要・メモ入力
- 作成日・更新日管理
- プロジェクトステータス管理

#### 4.2.2 プロジェクトダッシュボード
- 進捗状況表示（6段階ワークフロー）
- 各段階の完了状況
- 生成済みコンテンツ一覧
- チームメンバーのアクティビティ表示

#### 4.2.3 プロジェクトロック機能
- プロジェクト編集開始時に自動ロック
- 他ユーザーには「編集中」表示
- 編集者名・開始時刻表示
- 15分間操作がない場合は自動ロック解除
- 強制ロック解除機能（管理者のみ）
- リアルタイムでアクティブユーザー数監視

#### 4.2.4 同時使用制限管理
- プラン上限を超える場合はアクセス制限
- 待機キュー機能（上限時）
- セッション管理・追跡
- ログイン・ログアウト履歴

### 4.3 初期情報登録機能

#### 4.3.1 データ入力方式
- **テキスト直接入力**
- **PDFアップロード** (テキスト抽出)
- **URL解析** (レベル2スクレイピング)
  - 商品説明文、価格情報、特徴一覧
  - FAQ、レビュー・口コミ
  - 画像alt text
  - 基本的なページ構造の把握

#### 4.3.2 データ管理
- データタイトル設定
- 形式指定（テキスト/PDF/URL）
- タグ付け機能
  - 「商品情報」「ユーザー情報」「広告情報」
  - カスタムタグ作成可能
- フィルタリング機能
- データ編集・削除機能

### 4.4 コンテンツ生成機能

#### 4.4.1 商品情報サマリー生成
- 初期情報から自動生成
- 出力項目:
  - サービスの特徴
  - ユーザーメリット
  - 実績・権威性
  - オファー情報
- マークダウンエディター出力
- 再生成機能
- バリエーション: 1パターン（プロンプトが安定のため）

#### 4.4.2 教育コンテンツサマリー生成
- 潜在ニーズ顕在化コンテンツ
- 顧客教育要素抽出
- 商品価値理解促進内容
- 「知らなかった」から「欲しい」への誘導要素
- マークダウンエディター出力
- 再生成機能
- バリエーション: 1パターン（プロンプトが安定のため）

#### 4.4.3 クリエイティブパーツ生成
- 売れる要素の自動抽出:
  - 悩み指摘フレーズ
  - ターゲット属性指定
  - 現在行動否定
  - 悩み原因解説
  - 商品コンセプト説明
- マークダウンエディター出力
- 再生成機能
- バリエーション: 1パターン（プロンプトが安定のため）

#### 4.4.4 広告台本生成
- **2バリエーション同時生成**
- 詳細指示入力可能
- バリエーション選択機能
- 再生成オプション:
  - 片方選択して再生成
  - 両方再生成
- マークダウンエディター編集
- 話者ペルソナ指定（初期は女性一人称のみ）

### 4.5 サムネイル生成機能

#### 4.5.1 DALL-E 3統合
- OpenAI DALL-E 3 API統合
- 台本内容に基づく自動プロンプト生成
- 手動プロンプト編集機能
- 複数バリエーション生成（最大4枚）
- 手動生成トリガー（必要に応じて）

#### 4.5.2 テンプレート・比率管理
- **9:16** (Instagram Reels, TikTok)
- **1:1** (Instagram投稿)
- **16:9** (YouTube Shorts横画面)
- **4:5** (Instagram縦長投稿)
- 比率別最適化プロンプト

#### 4.5.3 サムネイル管理機能
- 生成履歴保存
- お気に入り機能
- ダウンロード（PNG・JPG）
- プロジェクト内での再利用
- サムネイルプレビュー機能

#### 4.5.4 使用量管理
- DALL-E 3使用回数追跡
- 月別生成コスト計算
- ユーザー別生成統計
- 画像生成上限設定（プランごと）

#### 4.5.5 品質最適化
- プロンプト自動最適化
- ブランドカラー反映機能
- 禁止ワード設定
- 生成品質評価機能

### 4.6 編集機能

#### 4.6.1 エディター機能
- マークダウン形式編集
- リアルタイムプレビュー
- 編集履歴管理
- 差分表示機能

#### 4.6.2 AI支援編集
- **Askモード**: Q&A形式での修正依頼
- **Agentモード**: AI自動修正
- モード切り替え機能
- 編集提案機能

### 4.7 評価機能

#### 4.7.1 評価軸（6項目・10点満点）
1. **表現（10点）**
   - 魅力的で印象に残る言葉選び
   - ターゲットに響く表現力
   - 感情を動かす文章構成

2. **構成（10点）**
   - 論理的な流れの自然さ
   - 冒頭から結論までの一貫性
   - 視聴者を最後まで引き込む構成力

3. **情報量（10点）**
   - 必要十分な情報の網羅性
   - 冗長でない適切な情報密度
   - 短時間で伝える情報選択の適切さ

4. **情報の質（10点）**
   - 事実に基づく正確性
   - 根拠・データの信頼性
   - 誤解を招かない明確さ

5. **教育（10点）**
   - 顧客の潜在ニーズの顕在化
   - 商品価値の理解促進度
   - 「知らなかった」から「欲しい」への誘導力

6. **クリエイティブ（10点）**
   - 独創性・差別化要素
   - 記憶に残るインパクト
   - 他社広告との差別化度合い

#### 4.7.2 評価機能
- AI自動評価
- 評価軸別スコア表示
- 評価コメント生成
- 評価履歴管理
- 評価軸のカスタマイズ（デフォルト設定変更）

### 4.8 完成台本管理機能

#### 4.8.1 台本一覧
- プロジェクト内台本リスト表示
- 作成日・更新日ソート
- 評価スコア表示
- ステータス管理
- 検索・フィルタ機能

#### 4.8.2 台本詳細
- 内容確認・編集
- 評価結果表示
- サムネイル管理・表示
- エクスポート機能（テキスト・PDF）
- 共有機能

## 5. 管理画面機能

### 5.1 APIキー管理

#### 5.1.1 設定可能API
- **OpenAI** (ChatGPT + DALL-E 3)
- **Anthropic** (Claude)
- **Google** (Gemini)
- **DeepSeek**

#### 5.1.2 APIキー設定機能
- 組織レベルでの一括設定
- 暗号化保存
- APIキー有効性チェック
- ローテーション機能
- アクセス権限管理

### 5.2 使用量レポート機能

#### 5.2.1 詳細レポート項目
- **ユーザー別使用量**
  - 生成回数（台本・サムネイル）
  - API使用量（トークン数・画像生成数）
  - 機能別使用統計
  - アクティブ時間

- **API別使用量**  
  - ChatGPT使用量・費用
  - DALL-E 3使用量・費用
  - Claude使用量・費用
  - Gemini使用量・費用
  - 合計費用予測

- **時系列レポート**
  - 日別・週別・月別使用量
  - トレンド分析
  - 前月比較
  - 成長率計算

#### 5.2.2 エクスポート機能
- CSV形式でのデータエクスポート
- 請求レポート生成
- 使用量グラフ表示
- PDF形式レポート

### 5.3 組織管理強化

#### 5.3.1 メンバー管理
- 招待メール送信
- 権限一括変更
- 使用状況一覧
- アクティビティログ
- メンバー使用統計

#### 5.3.2 プロジェクト管理
- 組織内全プロジェクト一覧
- プロジェクト権限設定
- 共有設定管理
- アーカイブ機能

## 6. 通知・アラート機能

### 6.1 使用量アラート
- API使用量が閾値を超えた場合
- 画像生成コスト警告
- 月額使用量予測アラート
- 予算超過警告
- 同時使用上限到達通知

### 6.2 システム通知
- プロジェクトロック・解除通知
- メンバー招待通知
- プラン変更通知
- トライアル期間残り通知
- 機能アップデート通知

### 6.3 メール通知
- 週次使用量レポート
- 月次請求書発行通知
- セキュリティアラート
- システムメンテナンス予告

## 7. 裏側ナレッジシステム（ユーザー非表示）

### 7.1 AIコピーライターペルソナ
- AIのシステムプロンプト
- コピーライター役割設定
- **完全秘匿仕様**（ログにも残さない）

### 7.2 クリエイティブパーツ要素マスター
- ヒット動画パターン集約
- 要素抽出ルール
- パターンデータベース
- **完全秘匿仕様**

### 7.3 話者ペルソナ
- 初期実装: 女性一人称（実体験説明パターン）
- 将来拡張: 複数ペルソナ対応
- キャラクター設定データ
- **完全秘匿仕様**

### 7.4 ヒット構成パターン
- 実績ある広告構成の体系化
- 構成パターンデータベース
- 成功要因分析データ
- **完全秘匿仕様**

## 8. ワークフロー

### 8.1 基本ワークフロー（6段階）
```
1. プロジェクト登録
   ↓
2. 初期情報登録（PDF/テキスト/URL）
   ↓
3. 商品情報サマリー生成（再生成可）
   ↓
4. 教育コンテンツ生成（再生成可）
   ↓
5. クリエイティブパーツ生成（再生成可）
   ↓
6. 広告台本生成（2バリエーション、再生成可）
   ↓
7. サムネイル生成（手動トリガー、4比率対応）
   ↓
8. 完成台本一覧（編集・評価・管理）
```

### 8.2 編集フロー
- 各段階で前ステップ編集時は手動再生成
- マークダウンエディターでの直接編集
- Ask/Agentモードでの AI支援編集
- リアルタイム保存機能

### 8.3 コラボレーションフロー
- プロジェクト共有設定
- 編集権限管理
- 変更履歴追跡
- コメント・フィードバック機能

## 9. セキュリティ・コンプライアンス

### 9.1 セキュリティ要件
- Supabase Row Level Security実装
- データ自動暗号化（AES-256）
- APIキー暗号化保存
- 裏側プロンプト完全秘匿
- アクセスログ管理
- IPアドレス制限（オプション）
- 2要素認証対応

### 9.2 データ保護
- 組織間のデータ完全分離
- GDPR対応データ削除
- データバックアップ・復旧
- 異常アクセス検知
- セキュリティ監査ログ

### 9.3 コンプライアンス
- データ保存期間の自動管理
- 利用規約・プライバシーポリシー準拠
- API利用規約への準拠確認
- 著作権・知的財産権の注意喚起

## 10. 請求・会計機能

### 10.1 請求管理
- 月次請求書自動生成
- 使用量内訳表示（台本・サムネイル別）
- 支払い履歴管理
- 次回請求予測
- 請求書PDF発行

### 10.2 コスト管理
- 使用量予測機能
- コスト削減提案
- APIごとの費用対効果分析
- 画像生成コスト最適化提案
- 予算上限設定・アラート

### 10.3 会計連携
- 会計ソフト連携API
- 経費精算データ出力
- 税務処理サポート
- 部門別コスト配分

## 11. サポート・ヘルプ機能

### 11.1 プラン別サポート
- **スターター**: メールサポート（48時間以内）
- **スタンダード**: メール + チャット（24時間以内）
- **プロ**: 優先サポート（12時間以内）

### 11.2 ヘルプ機能
- プロダクトツアー（初回利用時）
- チュートリアル動画
- FAQ検索機能
- 機能説明モーダル
- ユーザーガイド（PDF）

### 11.3 コミュニティ機能
- ユーザーフォーラム
- ベストプラクティス共有
- アップデート情報配信
- ウェビナー・説明会

## 12. 非機能要件

### 12.1 パフォーマンス要件
- 台本生成時間: 30秒以内（目標）
- サムネイル生成時間: 45秒以内（目標）
- 同時ユーザー: 100名（初期想定）
- レスポンス時間: 2秒以内
- ファイルアップロード: 最大10MB

### 12.2 可用性要件
- 稼働率: 99.5%以上
- 定期メンテナンス時間: 月1回・深夜2時間以内
- 障害復旧時間: 4時間以内（目標）

### 12.3 拡張性要件
- 将来的な広告形式追加対応
- 多言語対応準備
- AI API追加対応
- ユーザー数スケーリング対応

### 12.4 互換性要件
- モダンブラウザ対応（Chrome、Firefox、Safari、Edge）
- モバイルブラウザ対応
- レスポンシブデザイン
- ダークモード対応

## 13. 開発フェーズ

### 13.1 Phase 1 (MVP) - 3ヶ月
- 基本認証・組織管理
- プロジェクト管理・ロック機能
- 初期情報登録
- 6段階生成フロー
- 基本編集機能
- 料金・決済機能

### 13.2 Phase 2 - 2ヶ月
- 評価機能
- サムネイル生成
- Ask/Agentモード
- 高度な検索・フィルタ
- 詳細レポート機能

### 13.3 Phase 3 - 3ヶ月
- 複数広告形式対応
- 高度な分析機能
- API公開
- 外部ツール連携
- コミュニティ機能

## 14. 成功指標・KPI

### 14.1 利用指標
- 月間アクティブユーザー数
- プロジェクト作成数
- 台本生成数
- サムネイル生成数
- 組織登録数

### 14.2 品質指標
- 台本生成成功率
- サムネイル生成成功率
- ユーザー評価スコア平均
- 再生成率
- 編集完了率

### 14.3 ビジネス指標
- 月間経常収益（MRR）
- 顧客獲得コスト（CAC）
- 顧客生涯価値（LTV）
- チャーン率
- Net Promoter Score（NPS）

### 14.4 運用指標
- システム稼働率
- 平均レスポンス時間
- サポート解決時間
- API使用量・コスト

## 15. リスク管理

### 15.1 技術リスク
- AI API障害・価格変更対応
- スケーラビリティ課題
- セキュリティ脆弱性
- データ損失リスク

### 15.2 ビジネスリスク
- 競合サービス出現
- AI技術の急速な変化
- 法規制変更
- 市場環境変化

### 15.3 運用リスク
- サポート体制不足
- コスト予測困難
- ユーザー満足度低下
- チーム運用の複雑化

---

## 補足事項

この要件定義書は、CMO AIの完全版仕様書として、bolt.newでの段階的実装から本格運用まで全てをカバーしています。特に、SaaSモデルでの組織利用、料金管理、同時使用制限、サムネイル生成機能まで含めた包括的な設計となっており、裏側ナレッジシステムの完全秘匿化と、データドリブンなアプローチを重視した設計が特徴です。